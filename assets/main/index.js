System.register("chunks:///_virtual/AudioManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(i){var o,e,t,n,r,u,s,c,a,l;return{setters:[function(i){o=i.applyDecoratedDescriptor,e=i.inheritsLoose,t=i.initializerDefineProperty,n=i.assertThisInitialized,r=i.createClass},function(i){u=i.cclegacy,s=i._decorator,c=i.AudioSource,a=i.director,l=i.Component}],execute:function(){var g,p,h,m,d;u._RF.push({},"71a9f7G/o1BNrfTqchzAnjv","AudioManager",void 0);var b=s.ccclass,A=s.property;i("AudioManager",b("AudioManager")(((d=function(i){function o(){for(var o,e=arguments.length,r=new Array(e),u=0;u<e;u++)r[u]=arguments[u];return o=i.call.apply(i,[this].concat(r))||this,t(o,"bgmAudioSource",h,n(o)),t(o,"bgmClip",m,n(o)),o.isBgmPlaying=!1,o}e(o,i);var u=o.prototype;return u.onLoad=function(){this.bgmAudioSource=this.getComponent(c),this.bgmClip=this.bgmAudioSource.clip,o._instance=this,a.addPersistRootNode(this.node),this.bgmAudioSource.loop=!0},u.playBGM=function(){this.bgmAudioSource&&this.bgmClip?this.isBgmPlaying||(this.bgmAudioSource.clip=this.bgmClip,this.bgmAudioSource.play(),this.isBgmPlaying=!0):console.warn("背景音乐未设置")},u.pauseBGM=function(){this.bgmAudioSource&&this.isBgmPlaying&&(this.bgmAudioSource.pause(),this.isBgmPlaying=!1)},u.stopBGM=function(){this.bgmAudioSource&&(this.bgmAudioSource.stop(),this.isBgmPlaying=!1)},u.setBGMVolume=function(i){this.bgmAudioSource&&(this.bgmAudioSource.volume=i)},r(o,null,[{key:"Instance",get:function(){return this._instance||console.error("AudioManager 未初始化"),this._instance}}]),o}(l))._instance=null,h=o((p=d).prototype,"bgmAudioSource",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=o(p.prototype,"bgmClip",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=p))||g);u._RF.pop()}}}));

System.register("chunks:///_virtual/Battle.ts",["./rollupPluginModLoBabelHelpers.js","cc","./Move.ts","./DateManager.ts","./ENUM.ts","./Player.ts"],(function(e){var t,a,n,o,r,i,l,c,s,p,u,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,a=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,i=e._decorator,l=e.Node,c=e.Component},function(e){s=e.Move},function(e){p=e.DateManager},function(e){u=e.ENUM_Move},function(e){y=e.Player}],execute:function(){var v,f,g,d,M,h,N;r._RF.push({},"128caaZSL5ABqWSJVcgCuev","Battle",void 0);var b=i.ccclass,P=i.property;e("Battle",(v=b("Battle"),f=P(l),g=P(l),v((h=t((M=function(e){function t(){for(var t,a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return t=e.call.apply(e,[this].concat(r))||this,n(t,"PalyerNode",h,o(t)),n(t,"JoyNode",N,o(t)),t.player=null,t}a(t,e);var r=t.prototype;return r.start=function(){},r.onLoad=function(){p.ndPlayer=this.PalyerNode,this.player=this.PalyerNode.getComponent(y)},r.onEnable=function(){var e=this;this.JoyNode.getComponent(s).onTouchEvent((function(t,a){if(e.player&&e.player.isAlive)switch(t){case u.Start:break;case u.END:e.player.isMoving=!1,e.player.setMovingState(!1);break;case u.MOVE:void 0!==a&&null!=a&&(e.player.isMoving=!0),e.player.moveDirection=a,e.player.setMovingState(!0);break;case u.CANCEL:e.player.isMoving=!1,e.player.setMovingState(!1)}}))},t}(c)).prototype,"PalyerNode",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),N=t(M.prototype,"JoyNode",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:null}),d=M))||d));r._RF.pop()}}}));

System.register("chunks:///_virtual/Bullet.ts",["./rollupPluginModLoBabelHelpers.js","cc","./PoolManager.ts"],(function(e){var t,i,n,o,r,l,a,s,u,c;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){r=e.cclegacy,l=e._decorator,a=e.Collider2D,s=e.Contact2DType,u=e.Component},function(e){c=e.PoolManager}],execute:function(){var p,f,d,h,m,b,y,g,B,C,v;r._RF.push({},"dc471mavDlOB7tL5o+KoF2c","Bullet",void 0);var T=l.ccclass,w=l.property;e("Bullet",(p=T("Bullet"),f=w({type:Number,tooltip:"移动方向（1: 右, -1: 左）"}),d=w({type:Number,tooltip:"子弹速度"}),h=w({type:Number,tooltip:"子弹伤害"}),m=w({type:Number,tooltip:"子弹生命周期（秒）"}),p((g=t((y=function(e){function t(){for(var t,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return t=e.call.apply(e,[this].concat(r))||this,n(t,"direction",g,o(t)),n(t,"speed",B,o(t)),n(t,"damage",C,o(t)),n(t,"lifetime",v,o(t)),t.lifeTimer=0,t}i(t,e);var r=t.prototype;return r.onEnable=function(){this.lifeTimer=0;var e=this.node.getComponent(a);e&&e.on(s.BEGIN_CONTACT,this.onBeginContact,this)},r.onDisable=function(){var e=this.node.getComponent(a);e&&e.off(s.BEGIN_CONTACT,this.onBeginContact,this)},r.update=function(e){var t=this.speed*e;this.node.setPosition(this.node.position.x+this.direction*t,this.node.position.y),this.lifeTimer+=e,this.lifeTimer>=this.lifetime&&this.despawn()},r.onBeginContact=function(e,t,i){t.node.name.includes("Enemy")&&(console.log("击中敌人！"),this.despawn())},r.despawn=function(){c.Instance.put("BulletPool",this.node)},t}(u)).prototype,"direction",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),B=t(y.prototype,"speed",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 500}}),C=t(y.prototype,"damage",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),v=t(y.prototype,"lifetime",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 2}}),b=y))||b));r._RF.pop()}}}));

System.register("chunks:///_virtual/Camera.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts"],(function(t){var r,e,o,n,i,a,u,l,p;return{setters:[function(t){r=t.applyDecoratedDescriptor,e=t.inheritsLoose,o=t.initializerDefineProperty,n=t.assertThisInitialized},function(t){i=t.cclegacy,a=t._decorator,u=t.Vec3,l=t.Component},function(t){p=t.DateManager}],execute:function(){var c,y,s,d,f,b,m,h,B,g,w;i._RF.push({},"f2b13Z3iB5H644O+3+MLbuz","Camera",void 0);var z=a.ccclass,M=a.property;t("Camera",(c=z("Camera"),y=M({type:Number,tooltip:"左边界"}),s=M({type:Number,tooltip:"右边界"}),d=M({type:Number,tooltip:"下边界"}),f=M({type:Number,tooltip:"上边界"}),c((h=r((m=function(t){function r(){for(var r,e=arguments.length,i=new Array(e),a=0;a<e;a++)i[a]=arguments[a];return r=t.call.apply(t,[this].concat(i))||this,o(r,"leftBoundary",h,n(r)),o(r,"rightBoundary",B,n(r)),o(r,"bottomBoundary",g,n(r)),o(r,"topBoundary",w,n(r)),r}return e(r,t),r.prototype.update=function(t){if(p.ndPlayer){var r=p.ndPlayer.worldPosition,e=Math.max(this.leftBoundary,Math.min(this.rightBoundary,r.x)),o=Math.max(this.bottomBoundary,Math.min(this.topBoundary,r.y)),n=this.node.worldPosition.z;this.node.worldPosition=new u(e,o,n)}},r}(l)).prototype,"leftBoundary",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),B=r(m.prototype,"rightBoundary",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 590}}),g=r(m.prototype,"bottomBoundary",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),w=r(m.prototype,"topBoundary",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 360}}),b=m))||b));i._RF.pop()}}}));

System.register("chunks:///_virtual/DamagerText.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts","./PoolManager.ts"],(function(e){var t,n,o,a,r,s,c,i,l,u;return{setters:[function(e){t=e.inheritsLoose,n=e.createClass},function(e){o=e.cclegacy,a=e._decorator,r=e.UITransform,s=e.tween,c=e.Vec3,i=e.Component},function(e){l=e.DateManager},function(e){u=e.PoolManager}],execute:function(){var f,g;o._RF.push({},"fc846sCa1VMv5kN+df0fQl4","DamagerText",void 0);var p=a.ccclass;a.property,e("DamagerText",p("DamagerText")(((g=function(e){function o(){return e.apply(this,arguments)||this}t(o,e);var a=o.prototype;return a.start=function(){o._instance=this},a.onLoad=function(){this.createDamageTextPool()},a.createDamageTextPool=function(){var e=l.Prefabs[0];console.log("创建伤害文字对象池",e),e&&u.Instance.createPool("DamageTextPool",e,10)},a.showtext=function(e){var t=u.Instance.get("DamageTextPool");if(t){t.setParent(this.node);var n=e.worldPosition.clone();n.y+=30;var o=this.node.getComponent(r).convertToNodeSpaceAR(n);t.setPosition(o.x,o.y,0);var a=t.position.clone();s(t).to(.8,{position:new c(a.x,a.y+25,a.z)}).call((function(){u.Instance.put("DamageTextPool",t)})).start()}else console.error("无法从对象池获取伤害文字节点")},n(o,null,[{key:"Instance",get:function(){return this._instance}}]),o}(i))._instance=null,f=g))||f);o._RF.pop()}}}));

System.register("chunks:///_virtual/DateManager.ts",["cc"],(function(e){var a;return{setters:[function(e){a=e.cclegacy}],execute:function(){a._RF.push({},"2fcc3TDpXdE/q82XEeA2NXX","DateManager",void 0);var n=e("DateManager",(function(){}));n.selectedRole=null,n.ndPlayer=null,n.Prefabs=[],n.SpriteFrame=[],n.waveIndex=1,a._RF.pop()}}}));

System.register("chunks:///_virtual/Enemy.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts","./DamagerText.ts","./PoolManager.ts","./ExpBar.ts"],(function(i){var e,n,t,o,a,r,l,s,h,p,u,c,m,d,f,y,g,_;return{setters:[function(i){e=i.applyDecoratedDescriptor,n=i.inheritsLoose,t=i.initializerDefineProperty,o=i.assertThisInitialized},function(i){a=i.cclegacy,r=i._decorator,l=i.AnimationClip,s=i.PolygonCollider2D,h=i.Animation,p=i.Contact2DType,u=i.toDegree,c=i.Sprite,m=i.Color,d=i.Component},function(i){f=i.DateManager},function(i){y=i.DamagerText},function(i){g=i.PoolManager},function(i){_=i.ExpBar}],execute:function(){var b,C,v,w,D,A,x,E,B,M,T,I,N,P,z,k,S;a._RF.push({},"c963cKPyH1GV5MxPYBwJD3m","Enemy",void 0);var H=r.ccclass,G=r.property;i("Enemy",(b=H("Enemy"),C=G(l),v=G(l),w=G(l),D=G(Number),A=G({type:_,tooltip:"经验条组件"}),b((B=e((E=function(i){function e(){for(var e,n=arguments.length,a=new Array(n),r=0;r<n;r++)a[r]=arguments[r];return e=i.call.apply(i,[this].concat(a))||this,t(e,"enemy_hp",B,o(e)),t(e,"speed",M,o(e)),t(e,"speed_hit",T,o(e)),t(e,"speed_walk",I,o(e)),t(e,"animation_walk",N,o(e)),t(e,"animation_hurt",P,o(e)),t(e,"animation_die",z,o(e)),t(e,"exp",k,o(e)),t(e,"expBar",S,o(e)),e.moveDirection=0,e.isMoving=!1,e.Collider=void 0,e.Animation=void 0,e.poolName="EnemyPool",e}n(e,i);var a=e.prototype;return a.onLoad=function(){var i=this;this.Collider=this.node.getComponent(s),this.Animation=this.node.getComponent(h),this.Collider.on(p.BEGIN_CONTACT,this.onBeginContact,this),this.isMoving=!0,this.schedule((function(){if(f.ndPlayer&&f.ndPlayer){var e=f.ndPlayer.x-i.node.x,n=f.ndPlayer.y-i.node.y;i.moveDirection=Math.atan2(n,e)}}),.1)},a.onDestroy=function(){this.Collider.off(p.BEGIN_CONTACT,this.onBeginContact,this)},a.onBeginContact=function(i,e,n){this.enemy_hp-=1,8===e.group&&this.enemy_hp>0?(this.handleHit(),y.Instance.showtext(i.node)):this.enemy_hp<=0&&(this.handleDeath(),y.Instance.showtext(i.node))},a.handleHit=function(){var i,e,n=this;null==(i=this.Animation)||i.play(this.animation_hurt.name),this.speed=this.speed_hit,null==(e=this.Animation)||e.once(h.EventType.FINISHED,(function(){var i;null==(i=n.Animation)||i.play(n.animation_walk.name),n.speed=n.speed_walk}),this)},a.handleDeath=function(){var i,e,n=this;this.Collider.enabled=!1,_.Instance.gainExp(this.exp),this.isMoving=!1,null==(i=this.Animation)||i.play(this.animation_die.name),null==(e=this.Animation)||e.once(h.EventType.FINISHED,(function(){g.Instance.put(n.poolName,n.node)}),this)},a.update=function(i){if(this.isMoving){var e=this.node.position.x+Math.cos(this.moveDirection)*this.speed*i,n=this.node.position.y+Math.sin(this.moveDirection)*this.speed*i;this.node.setPosition(e,n)}var t=u(this.moveDirection);t>=-90&&t<=90?this.node.setScale(1,1):this.node.setScale(-1,1)},a.reset=function(){this.enemy_hp=3,this.speed=this.speed_walk,this.isMoving=!0,this.getComponent(c).color=new m(255,255,255),this.Collider&&(this.Collider.enabled=!0,this.Collider.off(p.BEGIN_CONTACT,this.onBeginContact,this),this.Collider.on(p.BEGIN_CONTACT,this.onBeginContact,this)),this.Animation&&this.animation_walk?this.Animation.play(this.animation_walk.name):this.Animation&&this.Animation.stop(),this.node.setScale(1,1),this.moveDirection=0},e}(d)).prototype,"enemy_hp",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 3}}),M=e(E.prototype,"speed",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),T=e(E.prototype,"speed_hit",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),I=e(E.prototype,"speed_walk",[G],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 50}}),N=e(E.prototype,"animation_walk",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=e(E.prototype,"animation_hurt",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=e(E.prototype,"animation_die",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=e(E.prototype,"exp",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),S=e(E.prototype,"expBar",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=E))||x));a._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyGroup.ts",["cc"],(function(o){var e;return{setters:[function(o){e=o.cclegacy}],execute:function(){e._RF.push({},"3c8b3mZM+BLRpr9ckEhR752","EnemyGroup",void 0);o("default",{monsterGroups:[{monsterid:1,monsterpool:"EnemyPool1"},{monsterid:2,monsterpool:"EnemyPool2"}]});e._RF.pop()}}}));

System.register("chunks:///_virtual/EnemyManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts","./PoolManager.ts","./Levels.ts","./Enemy.ts","./EnemyGroup.ts"],(function(e){var t,n,a,r,o,i,s,l,p,u,c,v,h,m;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized,o=e.createForOfIteratorHelperLoose},function(e){i=e.cclegacy,s=e._decorator,l=e.Vec3,p=e.Component},function(e){u=e.DateManager},function(e){c=e.PoolManager},function(e){v=e.default},function(e){h=e.Enemy},function(e){m=e.default}],execute:function(){var w,f,g,y,W,b,d,I,D,P,M,T,S,E,z;i._RF.push({},"13437O1x/BIbY/K1gb0N9gR","EnemyManager",void 0);var C=s.ccclass,N=s.property;e("EnemyManager",(w=C("EnemyManager"),f=N({type:Number,tooltip:"生成计时器"}),g=N({type:Number,tooltip:"已生成怪物数"}),y=N({type:Boolean,tooltip:"是否正在生成"}),W=N({type:Number,tooltip:"波次间隔计时器"}),b=N({type:Boolean,tooltip:"是否在波次间隔"}),d=N({type:[l],tooltip:"怪物生成点"}),w((P=t((D=function(e){function t(){for(var t,n=arguments.length,o=new Array(n),i=0;i<n;i++)o[i]=arguments[i];return t=e.call.apply(e,[this].concat(o))||this,a(t,"spawnTimer",P,r(t)),a(t,"monstersSpawned",M,r(t)),a(t,"isSpawning",T,r(t)),a(t,"waveIntervalTimer",S,r(t)),a(t,"inWaveInterval",E,r(t)),a(t,"spawnPoints",z,r(t)),t.WaveData=null,t}n(t,e);var i=t.prototype;return i.onLoad=function(){this.getCurrentWave(),this.createEnemyPool(),this.startWave()},i.update=function(e){if(this.inWaveInterval)return this.waveIntervalTimer+=e,void(this.waveIntervalTimer>=3&&(this.waveIntervalTimer=0,this.inWaveInterval=!1,this.startNextWave()));if(this.isSpawning){if(this.spawnTimer+=e,!this.WaveData)return;this.spawnTimer>=this.WaveData.spawnInterval&&(this.spawnTimer=0,this.monstersSpawned<this.WaveData.spawnCount?(this.spawnMonster(this.WaveData),this.monstersSpawned++):(this.isSpawning=!1,this.checkWaveComplete()))}},i.createEnemyPool=function(){for(var e,t=o(m.monsterGroups);!(e=t()).done;){var n=e.value,a=u.Prefabs[n.monsterid];a&&(c.Instance.createPool(n.monsterpool,a,20),console.log("创建怪物对象池",a))}var r=this.WaveData.monsterGroups[0].monsterid,i=u.Prefabs[r];i&&(c.Instance.createPool(this.WaveData.monsterGroups[0].monsterpool,i,20),console.log("创建怪物对象池",i))},i.startWave=function(){this.WaveData?(console.log("开始第 "+this.WaveData.waveId+" 波"),this.spawnTimer=0,this.monstersSpawned=0,this.isSpawning=!0):console.log("所有波次完成！")},i.startNextWave=function(){this.getCurrentWave(),this.startWave()},i.getCurrentWave=function(){return this.WaveData=v["level"+u.waveIndex],this.WaveData?(console.log("当前波次数据",this.WaveData),this.WaveData):(console.error("未找到关卡数据"),null)},i.spawnMonster=function(e){var t=this.spawnPoints[Math.floor(Math.random()*this.spawnPoints.length)];if(e.monsterGroups.length>0)for(var n,a=o(e.monsterGroups);!(n=a()).done;){var r=n.value,i=c.Instance.get(r.monsterpool);if(i){i.setParent(this.node),i.setPosition(t);var s=i.getComponent(h);s.poolName=r.monsterpool,s.reset()}else console.error("无法从对象池获取怪物节点")}},i.checkWaveComplete=function(){console.log("波次完成，进入间隔时间"),this.inWaveInterval=!0,this.waveIntervalTimer=0,u.waveIndex++},t}(p)).prototype,"spawnTimer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),M=t(D.prototype,"monstersSpawned",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),T=t(D.prototype,"isSpawning",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),S=t(D.prototype,"waveIntervalTimer",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),E=t(D.prototype,"inWaveInterval",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return!1}}),z=t(D.prototype,"spawnPoints",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[new l(-300,300,0),new l(300,300,0),new l(-300,-300,0),new l(300,-300,0),new l(0,300,0),new l(0,-300,0),new l(-300,0,0),new l(300,0,0)]}}),I=D))||I));i._RF.pop()}}}));

System.register("chunks:///_virtual/ENUM.ts",["cc"],(function(t){var e;return{setters:[function(t){e=t.cclegacy}],execute:function(){e._RF.push({},"908cfXiARdPArJyv2iJfDHa","ENUM",void 0);t("ENUM_Move",function(t){return t[t.Start=0]="Start",t[t.END=1]="END",t[t.MOVE=2]="MOVE",t[t.CANCEL=3]="CANCEL",t}({})),t("WeaponType",function(t){return t[t.MELEE=0]="MELEE",t[t.GUN=1]="GUN",t}({}));e._RF.pop()}}}));

System.register("chunks:///_virtual/ExpBar.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardSelectUI.ts"],(function(e){var t,r,n,i,a,o,l,c,u,p,s,h,f,x;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,i=e.assertThisInitialized,a=e.createClass},function(e){o=e.cclegacy,l=e._decorator,c=e.ProgressBar,u=e.Label,p=e.Node,s=e.tween,h=e.Vec3,f=e.Component},function(e){x=e.RewardSelectUI}],execute:function(){var b,d,v,L,g,m,E,y,w,B,I,z,U,F,_,k,C,N;o._RF.push({},"751fbYCiYtDc6oQK9kUeCh2","ExpBar",void 0);var R=l.ccclass,D=l.property;e("ExpBar",(b=R("ExpBar"),d=D({type:c,tooltip:"经验条前景"}),v=D({type:u,tooltip:"等级标签"}),L=D({type:Number,tooltip:"当前等级"}),g=D({type:Number,tooltip:"当前经验"}),m=D({type:Number,tooltip:"升级所需经验"}),E=D({type:Number,tooltip:"经验递增系数"}),y=D({type:p,tooltip:"奖励节点"}),b(((N=function(e){function t(){for(var t,r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,n(t,"foreground",I,i(t)),n(t,"levelLabel",z,i(t)),n(t,"currentLevel",U,i(t)),n(t,"currentExp",F,i(t)),n(t,"maxExp",_,i(t)),n(t,"expIncreaseFactor",k,i(t)),n(t,"rewardIncreaseFactor",C,i(t)),t}r(t,e);var o=t.prototype;return o.onLoad=function(){t._instance=this,this.updateExpBar(),this.updateLevelLabel()},o.updateExpBar=function(){if(this.foreground){var e=this.currentExp/this.maxExp;this.foreground.progress=e}},o.updateLevelLabel=function(){this.levelLabel&&(this.levelLabel.string="Lv:"+this.currentLevel)},o.gainExp=function(e){this.currentExp+=e,this.checkLevelUp(),this.animateExpGain()},o.checkLevelUp=function(){for(;this.currentExp>=this.maxExp;)this.currentLevel++,this.currentExp-=this.maxExp,this.maxExp=Math.floor(this.maxExp*this.expIncreaseFactor),this.onLevelUp();this.updateExpBar(),this.updateLevelLabel()},o.onLevelUp=function(){console.log("升级了！当前等级："+this.currentLevel),this.animateLevelUp(),this.rewardIncreaseFactor.getComponent(x).showRewards(this.currentLevel)},o.animateExpGain=function(){s(this.foreground.node).to(.1,{scale:new h(1.05*this.foreground.node.scale.x,1.1,1)}).to(.1,{scale:new h(this.foreground.node.scale.x,1,1)}).start()},o.animateLevelUp=function(){s(this.levelLabel.node).to(.2,{scale:new h(1.2,1.2,1)}).to(.2,{scale:new h(1,1,1)}).start(),this.updateExpBar()},a(t,null,[{key:"Instance",get:function(){return this._instance}}]),t}(f))._instance=null,I=t((B=N).prototype,"foreground",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=t(B.prototype,"levelLabel",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),U=t(B.prototype,"currentLevel",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1}}),F=t(B.prototype,"currentExp",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 0}}),_=t(B.prototype,"maxExp",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 10}}),k=t(B.prototype,"expIncreaseFactor",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 1.5}}),C=t(B.prototype,"rewardIncreaseFactor",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=B))||w));o._RF.pop()}}}));

System.register("chunks:///_virtual/GunWeapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts","./PoolManager.ts","./Bullet.ts"],(function(t){var e,i,n,o,r,a,l,s,u,c,p,f,h,g;return{setters:[function(t){e=t.applyDecoratedDescriptor,i=t.inheritsLoose,n=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){r=t.cclegacy,a=t._decorator,l=t.Prefab,s=t.Node,u=t.Vec3,c=t.tween,p=t.Component},function(t){f=t.DateManager},function(t){h=t.PoolManager},function(t){g=t.Bullet}],execute:function(){var b,y,d,P,m,v,w,F,B;r._RF.push({},"150ac5Z7YtOlqLiCXbLdoUt","GunWeapon",void 0);var D=a.ccclass,x=a.property;t("GunWeapon",(b=D("GunWeapon"),y=x({type:l,tooltip:"子弹预制体"}),d=x({type:Number,tooltip:"射击间隔（秒）"}),P=x({type:s,tooltip:"子弹父节点"}),b((w=e((v=function(t){function e(){for(var e,i=arguments.length,r=new Array(i),a=0;a<i;a++)r[a]=arguments[a];return e=t.call.apply(t,[this].concat(r))||this,n(e,"bulletPrefab",w,o(e)),n(e,"fireRate",F,o(e)),n(e,"bulletparent",B,o(e)),e.isFiring=!1,e.lastFireTime=0,e.facing="right",e}i(e,t);var r=e.prototype;return r.onLoad=function(){this.bulletPrefab&&h.Instance.createPool("BulletPool",this.bulletPrefab,20)},r.setFacingDirection=function(t){this.facing=t,this.node.scale=new u("right"===t?1:-1,this.node.scale.y,this.node.scale.z)},r.setPosition=function(t){f.ndPlayer&&this.node.setPosition(f.ndPlayer.position.x+t.x,f.ndPlayer.position.y+t.y)},r.fire=function(){if(!this.isFiring){var t=(new Date).getTime()/1e3;t-this.lastFireTime<this.fireRate||(this.lastFireTime=t,this.spawnBullet(),this.playFireAnimation())}},r.spawnBullet=function(){var t=h.Instance.get("BulletPool");if(t){var e=this.node.position.clone();e.x+="right"===this.facing?20:-20,t.setParent(this.bulletparent),t.setPosition(e),t.active=!0;var i=t.getComponent(g);i&&(i.direction="right"===this.facing?1:-1)}},r.playFireAnimation=function(){c(this.node).to(.05,{position:new u(this.node.position.x,this.node.position.y-2,0)}).to(.1,{position:new u(this.node.position.x,this.node.position.y,0)}).start()},e}(p)).prototype,"bulletPrefab",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=e(v.prototype,"fireRate",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return.1}}),B=e(v.prototype,"bulletparent",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=v))||m));r._RF.pop()}}}));

System.register("chunks:///_virtual/level1.ts",["cc"],(function(e){var n;return{setters:[function(e){n=e.cclegacy}],execute:function(){n._RF.push({},"83db9rMN5pLqZseC5uC1cnB","level1",void 0);e("default",{waveId:1,spawnDelay:2,spawnInterval:2,spawnCount:10,monsterGroups:[{monsterid:1,monsterpool:"EnemyPool1",count:10}],bossSpawn:!1});n._RF.pop()}}}));

System.register("chunks:///_virtual/level2.ts",["cc"],(function(e){var o;return{setters:[function(e){o=e.cclegacy}],execute:function(){o._RF.push({},"0e831WXiA1M0bi8foT4rTO4","level2",void 0);e("default",{waveId:2,spawnDelay:2,spawnInterval:2,spawnCount:10,monsterGroups:[{monsterid:1,monsterpool:"EnemyPool1",count:3},{monsterid:2,monsterpool:"EnemyPool2",count:7}],bossSpawn:!1});o._RF.pop()}}}));

System.register("chunks:///_virtual/Levels.ts",["cc","./level1.ts","./level2.ts"],(function(e){var t,l,u;return{setters:[function(e){t=e.cclegacy},function(e){l=e.default},function(e){u=e.default}],execute:function(){t._RF.push({},"815caSmaVdMiYkhoK24ufWY","Levels",void 0);e("default",{level1:l,level2:u});t._RF.pop()}}}));

System.register("chunks:///_virtual/Loading.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ResourceManager.ts","./DateManager.ts","./AudioManager.ts"],(function(e){var n,t,r,a,o,i,s,c,u,p,l,f;return{setters:[function(e){n=e.inheritsLoose,t=e.asyncToGenerator,r=e.regeneratorRuntime},function(e){a=e.cclegacy,o=e._decorator,i=e.Component,s=e.Sprite,c=e.resources,u=e.director},function(e){p=e.default},function(e){l=e.DateManager},function(e){f=e.AudioManager}],execute:function(){var d;a._RF.push({},"e75beuCjJxIap0iC6EoqjE9","Loading",void 0);var g=o.ccclass;o.property,e("Loading",g("Loading")(d=function(e){function a(){for(var n,t=arguments.length,r=new Array(t),a=0;a<t;a++)r[a]=arguments[a];return(n=e.call.apply(e,[this].concat(r))||this).sprite=null,n}return n(a,e),a.prototype.onLoad=function(){var e=t(r().mark((function e(){var n=this;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.sprite=this.node.getComponent(s),c.preloadDir("Main",(function(e,t){n.sprite.fillRange=e/t}),(function(){u.loadScene("start"),f.Instance.playBGM(),console.log("资源加载完成")})),e.next=4,p.Instance.loadDir("Main/Prefab");case 4:return l.Prefabs=e.sent,e.next=7,p.Instance.loadDir2("Main/texture");case 7:l.SpriteFrame=e.sent;case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}(),a}(i))||d);a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./AudioManager.ts","./VolumeControl.ts","./DateManager.ts","./ENUM.ts","./EnemyGroup.ts","./ResourceManager.ts","./RoleItemData.ts","./Enemy.ts","./EnemyManager.ts","./Levels.ts","./level1.ts","./level2.ts","./Loading.ts","./PlayerSelec.ts","./start.ts","./Battle.ts","./Camera.ts","./DamagerText.ts","./ExpBar.ts","./Move.ts","./set.ts","./Player.ts","./PlayerManager.ts","./ObjectPool.ts","./PoolManager.ts","./RewardData.ts","./RewardManager.ts","./RewardSelectUI.ts","./Bullet.ts","./GunWeapon.ts","./Weapon.ts"],(function(){return{setters:[null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/Move.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ENUM.ts"],(function(t){var n,i,s,o,e,r,a,h,d,c,_,u;return{setters:[function(t){n=t.applyDecoratedDescriptor,i=t.inheritsLoose,s=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){e=t.cclegacy,r=t._decorator,a=t.Node,h=t.Vec2,d=t.Vec3,c=t.UITransform,_=t.Component},function(t){u=t.ENUM_Move}],execute:function(){var f,v,l,p,y;e._RF.push({},"836768EOD1GRLUipYiCGSlI","Move",void 0);var H=r.ccclass,E=r.property;t("Move",(f=H("Move"),v=E(a),f((y=n((p=function(t){function n(){for(var n,i=arguments.length,e=new Array(i),r=0;r<i;r++)e[r]=arguments[r];return(n=t.call.apply(t,[this].concat(e))||this)._v2=new h,n._touchWordPos=new d,n._currPos=new d,n._startPos=new d,n._radius=0,s(n,"ndHand",y,o(n)),n._listener=void 0,n._arrArg=[-1,-1],n._targe=void 0,n}i(n,t);var e=n.prototype;return e.onLoad=function(){this._radius=this.node.getComponent(c).contentSize.width/2,this.ndHand.on(a.EventType.TOUCH_MOVE,this.Move,this),this.ndHand.on(a.EventType.TOUCH_START,this.onStart,this),this.ndHand.on(a.EventType.TOUCH_END,this.End,this),this.ndHand.on(a.EventType.TOUCH_CANCEL,this.Cancel,this)},e.onDestroy=function(){this.ndHand&&this.ndHand.isValid&&(this.ndHand.off(a.EventType.TOUCH_MOVE,this.Move,this),this.ndHand.off(a.EventType.TOUCH_START,this.onStart,this),this.ndHand.off(a.EventType.TOUCH_END,this.End,this),this.ndHand.off(a.EventType.TOUCH_CANCEL,this.Cancel,this))},e.Move=function(t){t.getUILocation(this._v2),this._touchWordPos.set(this._v2.x,this._v2.y),this.node.getComponent(c).convertToNodeSpaceAR(this._touchWordPos,this._currPos);var n=h.distance(this._startPos,this._currPos),i=Math.atan2(this._currPos.y-this._startPos.y,this._currPos.x-this._startPos.x);if(n<this._radius)this.ndHand.setPosition(this._currPos);else{var s=this._startPos.x+Math.cos(i)*this._radius,o=this._startPos.y+Math.sin(i)*this._radius;this.ndHand.setPosition(s,o)}this._notify(u.MOVE,i)},e.onStart=function(){},e.End=function(){this._notify(u.END),this.ndHand.setPosition(0,0)},e.Cancel=function(){this._notify(u.CANCEL),this.ndHand.setPosition(0,0)},e.onTouchEvent=function(t,n){this._listener=t,this._targe=n},e._notify=function(t,n){this._arrArg[0]=t,this._arrArg[1]=n,this._listener&&this._listener.apply(this._targe,this._arrArg)},n}(_)).prototype,"ndHand",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),l=p))||l));e._RF.pop()}}}));

System.register("chunks:///_virtual/ObjectPool.ts",["cc"],(function(t){var o,e,i;return{setters:[function(t){o=t.cclegacy,e=t.instantiate,i=t.NodePool}],execute:function(){o._RF.push({},"ac0afFQs/tD1Y61c/CzYh98","ObjectPool",void 0);t("ObjectPool",function(){function t(t,o,e){void 0===e&&(e=5),this._pool=void 0,this._prefab=void 0,this._poolName=void 0,this._activeCount=0,this._prefab=t,this._poolName=o,this._pool=new i,this.preCreate(e),console.log("对象池 "+o+" 创建完成，预创建 "+e+" 个对象")}var o=t.prototype;return o.preCreate=function(t){for(var o=0;o<t;o++){var i=e(this._prefab);this._pool.put(i)}},o.get=function(){var t;return t=this._pool.size()>0?this._pool.get():e(this._prefab),this._activeCount++,t},o.put=function(t){t&&t.isValid&&(t.setPosition(0,25,0),t.setRotation(0,0,0,1),t.active=!0,t.removeFromParent(),this._pool.put(t),this._activeCount--)},o.clear=function(){this._pool.clear(),this._activeCount=0},t}());o._RF.pop()}}}));

System.register("chunks:///_virtual/Player.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DamagerText.ts","./DateManager.ts","./PlayerManager.ts"],(function(t){var n,e,i,o,a,s,r,l,h,p,c,m,u,g,d,y,f;return{setters:[function(t){n=t.applyDecoratedDescriptor,e=t.inheritsLoose,i=t.initializerDefineProperty,o=t.assertThisInitialized},function(t){a=t.cclegacy,s=t._decorator,r=t.ProgressBar,l=t.Node,h=t.Collider2D,p=t.Contact2DType,c=t.Animation,m=t.director,u=t.toDegree,g=t.Component},function(t){d=t.DamagerText},function(t){y=t.DateManager},function(t){f=t.PlayerManager}],execute:function(){var v,C,D,M,P,_,b,A,T;a._RF.push({},"dc25fA3u2JLgIXz666tasMY","Player",void 0);var I=s.ccclass,F=s.property;t("Player",(v=I("Player"),C=F(r),D=F(l),M=F(l),v((b=n((_=function(t){function n(){for(var n,e=arguments.length,a=new Array(e),s=0;s<e;s++)a[s]=arguments[s];return n=t.call.apply(t,[this].concat(a))||this,i(n,"hpprogress",b,o(n)),i(n,"playermanger",A,o(n)),i(n,"player_die",T,o(n)),n.speed=100,n.moveDirection=0,n.isMoving=!1,n.isAlive=!0,n.hp=3,n.facing="right",n.isAnimationPlaying=!1,n.animationComponent=null,n}e(n,t);var a=n.prototype;return a.onLoad=function(){this.node.getComponent(h).on(p.BEGIN_CONTACT,this.onBeginContact,this),this.animationComponent=this.getComponent(c),this.setspriteFrame()},a.onDestroy=function(){this.node.getComponent(h).off(p.BEGIN_CONTACT,this.onBeginContact,this)},a.onBeginContact=function(t,n,e){this.hp-=1,this.hpprogress.progress=this.hp/3,this.hp>0?this.handleHit():this.hp<=0&&this.handleDeath(),d.Instance.showtext(t.node)},a.handleHit=function(){var t=this;this.animationComponent.play(y.selectedRole.animation_hurt.name),this.animationComponent.once(c.EventType.FINISHED,(function(){t.animationComponent.play(y.selectedRole.animation_walk.name)}),this)},a.handleDeath=function(){var t=this;this.isAlive=!1,this.isMoving=!1,this.node.getComponent(h).enabled=!1,this.animationComponent.play(y.selectedRole.animation_die.name),this.animationComponent.once(c.EventType.FINISHED,(function(){t.playermanger.getComponent(f).destroyWeapon(),t.player_die.active=!0,m.pause()}),this)},a.button=function(){m.loadScene("start"),m.resume(),this.player_die.active=!1},a.setspriteFrame=function(){this.animationComponent.defaultClip=y.selectedRole.animation_idle},a.update=function(t){if(this.isMoving){var n=this.node.position.x+Math.cos(this.moveDirection)*this.speed*t;n=Math.max(Math.min(n,570),-570);var e=this.node.position.y+Math.sin(this.moveDirection)*this.speed*t;e=Math.max(Math.min(e,340),-340),this.node.setPosition(n,e)}this.updateFacingDirection(),this.playermanger.getComponent(f).updateWeaponPosition()},a.setMovingState=function(t){this.isMoving=t,t&&!this.isAnimationPlaying?(this.animationComponent.play(y.selectedRole.animation_walk.name),this.isAnimationPlaying=!0):!t&&this.isAnimationPlaying&&(this.animationComponent.play(y.selectedRole.animation_idle.name),this.isAnimationPlaying=!1)},a.updateFacingDirection=function(){var t=u(this.moveDirection);t>=-90&&t<=90?(this.node.setScale(1,1),this.facing="right"):(this.node.setScale(-1,1),this.facing="left")},n}(g)).prototype,"hpprogress",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=n(_.prototype,"playermanger",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=n(_.prototype,"player_die",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=_))||P));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ENUM.ts","./GunWeapon.ts","./Player.ts","./Weapon.ts"],(function(e){var t,i,n,o,a,s,r,p,c,u,h,l,f;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.initializerDefineProperty,o=e.assertThisInitialized},function(e){a=e.cclegacy,s=e._decorator,r=e.Node,p=e.Vec3,c=e.Component},function(e){u=e.WeaponType},function(e){h=e.GunWeapon},function(e){l=e.Player},function(e){f=e.Weapon}],execute:function(){var g,y,W,d,v,E,M,P,m;a._RF.push({},"8aefbBfF65ESIJ2T8YHez48","PlayerManager",void 0);var b=s.ccclass,T=s.property;e("PlayerManager",(g=b("PlayerManager"),y=T(r),W=T(r),d=T(r),g((M=t((E=function(e){function t(){for(var t,i=arguments.length,a=new Array(i),s=0;s<i;s++)a[s]=arguments[s];return t=e.call.apply(e,[this].concat(a))||this,n(t,"Weapons",M,o(t)),n(t,"gunWeapon",P,o(t)),n(t,"playerNode",m,o(t)),t.speed=100,t.moveDirection=0,t.isMoving=!1,t.isAlive=!0,t.player=null,t.facing="right",t.isattacking=!1,t.currentWeaponType=u.MELEE,t}i(t,e);var a=t.prototype;return a.onLoad=function(){this.player=this.playerNode.getComponent(l),this.moveDirection=this.player.moveDirection,this.facing=this.player.facing,this.speed=this.player.speed,this.updateWeaponVisibility()},a.upspeed=function(){this.player.speed=1.1*this.player.speed},a.attack=function(){var e=this;if(this.currentWeaponType===u.MELEE){var t=this.Weapons.getComponent(f);if(this.isattacking)return;this.isattacking=!0,"right"===this.facing?t.rightattack((function(){e.isattacking=!1,e.updateWeaponPosition()})):t.leftattack((function(){e.isattacking=!1,e.updateWeaponPosition()}))}else if(this.currentWeaponType===u.GUN){this.gunWeapon.getComponent(h).fire()}},a.switchWeapon=function(){this.currentWeaponType===u.MELEE?this.currentWeaponType=u.GUN:this.currentWeaponType=u.MELEE,this.updateWeaponVisibility(),console.log("切换武器至: "+(this.currentWeaponType===u.MELEE?"近战":"远程"))},a.updateWeaponVisibility=function(){this.Weapons&&(this.Weapons.active=this.currentWeaponType===u.MELEE),this.gunWeapon&&(this.gunWeapon.active=this.currentWeaponType===u.GUN)},a.updateWeaponPosition=function(){if(this.facing=this.player.facing,this.currentWeaponType===u.MELEE){if(this.isattacking)return;var e=this.Weapons.getComponent(f);e&&("right"===this.facing?e.setPositionAndRotation(new p(15,-6,0),-22):e.setPositionAndRotation(new p(-15,-6,0),22))}else if(this.currentWeaponType===u.GUN){var t=this.gunWeapon.getComponent(h);t&&(t.setFacingDirection(this.facing),"right"===this.facing?t.setPosition(new p(20,-5,0)):t.setPosition(new p(-20,-5,0)))}},a.destroyWeapon=function(){this.Weapons.active=!1,this.gunWeapon.active=!1},a.update=function(e){if(this.isMoving){var t=this.Weapons.position.x+Math.cos(this.moveDirection)*this.speed*e,i=this.Weapons.position.y+Math.sin(this.moveDirection)*this.speed*e;this.Weapons.setPosition(t,i)}this.isattacking||this.updateWeaponPosition()},t}(c)).prototype,"Weapons",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=t(E.prototype,"gunWeapon",[W],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=t(E.prototype,"playerNode",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),v=E))||v));a._RF.pop()}}}));

System.register("chunks:///_virtual/PlayerSelec.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts","./RoleItemData.ts"],(function(e){var t,n,i,r,a,o,l,c,s,u,d,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.Node,c=e.UIOpacity,s=e.director,u=e.Component},function(e){d=e.DateManager},function(e){h=e.RoleItemData}],execute:function(){var p,f,m,y,g,P,x,_,b;a._RF.push({},"687fcWmJehKAKN1+nKW4a+z","PlayerSelec",void 0);var v=o.ccclass,C=o.property;e("PlayerSelec",(p=v("PlayerSelec"),f=C(l),m=C(l),y=C(l),p((x=t((P=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"ndBtnRight",x,r(t)),i(t,"ndBtnLeft",_,r(t)),i(t,"ndPlayer",b,r(t)),t.currindex=0,t.len=0,t}n(t,e);var a=t.prototype;return a.onLoad=function(){this.len=this.ndPlayer.children.length,this.updateState()},a.onRight=function(){this.currindex++,this.currindex>=this.len&&(this.currindex=this.len-1),this.ndPlayer.setPosition(150*-this.currindex,0,0),this.updateState()},a.onLeft=function(){this.currindex--,this.currindex<=0&&(this.currindex=0),this.ndPlayer.setPosition(150*this.currindex,0,0),this.updateState()},a.updateState=function(){this.ndPlayer.children[this.currindex].getComponent(c).opacity=255;for(var e=0;e<this.len;e++)e!=this.currindex&&(this.ndPlayer.children[e].getComponent(c).opacity=150,this.ndPlayer.children[e].getComponent(c).enabled=!0);this.ndBtnLeft.active=this.currindex>0,this.ndBtnRight.active=this.currindex<this.len-1},a.onConfirm=function(){var e=this.ndPlayer.children[this.currindex].children[0];e&&(d.selectedRole={animation_idle:e.getComponent(h).animation_idle,animation_walk:e.getComponent(h).animation_walk,animation_hurt:e.getComponent(h).animation_hurt,animation_die:e.getComponent(h).animation_die,spriteFrame:e.getComponent(h).spriteFrame},console.log("选中角色数据:",d.selectedRole),s.loadScene("scene"))},t}(u)).prototype,"ndBtnRight",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(P.prototype,"ndBtnLeft",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),b=t(P.prototype,"ndPlayer",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=P))||g));a._RF.pop()}}}));

System.register("chunks:///_virtual/PoolManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./ObjectPool.ts"],(function(t){var n,o,e;return{setters:[function(t){n=t.createClass},function(t){o=t.cclegacy},function(t){e=t.ObjectPool}],execute:function(){o._RF.push({},"67c30aJn91Nc7pR+s2IE5Tk","PoolManager",void 0),t("PoolManager",function(){function t(){this._pools=new Map}var o=t.prototype;return o.createPool=function(t,n,o){if(void 0===o&&(o=5),this._pools.has(t))return console.warn("对象池 "+t+" 已存在"),this._pools.get(t);var s=new e(n,t,o);return this._pools.set(t,s),s},o.get=function(t){var n=this._pools.get(t);return n?n.get():(console.error("对象池 "+t+" 不存在"),null)},o.put=function(t,n){var o=this._pools.get(t);o?o.put(n):n.destroy()},n(t,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new t),this._instance}}]),t}())._instance=void 0,o._RF.pop()}}}));

System.register("chunks:///_virtual/ResourceManager.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(n){var e,t,r,i,o;return{setters:[function(n){e=n.createClass},function(n){t=n.cclegacy,r=n.resources,i=n.Prefab,o=n.SpriteFrame}],execute:function(){t._RF.push({},"65e4fIMXkBCf6nNgYTjSLzE","ResourceManager",void 0),n("default",function(){function n(){}var t=n.prototype;return t.loadDir=function(n,e){return void 0===e&&(e=i),new Promise((function(t,i){r.loadDir(n,e,(function(n,e){n?i(n):t(e)}))}))},t.loadDir2=function(n,e){return void 0===e&&(e=o),new Promise((function(t,i){r.loadDir(n,e,(function(n,e){n?i(n):t(e)}))}))},e(n,null,[{key:"Instance",get:function(){return this._instance||(this._instance=new n),this._instance}}]),n}())._instance=void 0,t._RF.pop()}}}));

System.register("chunks:///_virtual/RewardData.ts",["cc"],(function(e){var t,c;return{setters:[function(e){t=e.cclegacy,c=e._decorator}],execute:function(){t._RF.push({},"492cbIoZbJDnJT46Sbbz/D4","RewardData",void 0);c.ccclass,c.property,e("RewardType",function(e){return e[e.ATTRIBUTE=0]="ATTRIBUTE",e[e.ITEM=1]="ITEM",e}({}));t._RF.pop()}}}));

System.register("chunks:///_virtual/RewardManager.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardData.ts","./PlayerManager.ts","./ENUM.ts"],(function(e){var n,t,a,r,o,i,c,s,l;return{setters:[function(e){n=e.inheritsLoose,t=e.createClass},function(e){a=e.cclegacy,r=e._decorator,o=e.Widget,i=e.Component},function(e){c=e.RewardType},function(e){s=e.PlayerManager},function(e){l=e.WeaponType}],execute:function(){var u,d;a._RF.push({},"1fef2g1LOpOEK8fKIC87dQf","RewardManager",void 0);var p=r.ccclass;r.property,e("RewardManager",p("RewardManager")(((d=function(e){function a(){for(var n,t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return(n=e.call.apply(e,[this].concat(a))||this).rewardPools=[],n}n(a,e);var r=a.prototype;return r.onEnable=function(){var e=this.node.getComponent(o);e&&e.updateAlignment()},r.onLoad=function(){console.log("RewardManager 初始化"),a._instance=this,this.initRewardPools()},r.initRewardPools=function(){this.rewardPools.push({level:2,rewards:[{id:"attack_boost_1",name:"AK47",description:"开始猛攻吧！",type:c.ITEM,value:1,iconPath:"0",applyEffect:function(e){e.getComponent(s).currentWeaponType=l.GUN,e.getComponent(s).updateWeaponVisibility()}}]})},r.getRewardsForLevel=function(e){var n=this.rewardPools.find((function(n){return n.level===e}));return n?this.selectRandomRewards(n.rewards,3):this.getDefaultRewards()},r.selectRandomRewards=function(e,n){return[].concat(e).sort((function(){return.5-Math.random()})).slice(0,n)},r.getDefaultRewards=function(){return[{id:"default_attack",name:"移动速度提升",description:"移动速度 +10%",type:c.ATTRIBUTE,value:.1,iconPath:"",applyEffect:function(e){e.getComponent(s).upspeed()}}]},r.applyReward=function(e,n){e.applyEffect(n),console.log("应用奖励: "+e.name+" - "+e.description)},t(a,null,[{key:"Instance",get:function(){return a._instance||console.error("RewardManager 未初始化"),a._instance}}]),a}(i))._instance=null,u=d))||u);a._RF.pop()}}}));

System.register("chunks:///_virtual/RewardSelectUI.ts",["./rollupPluginModLoBabelHelpers.js","cc","./RewardManager.ts","./DateManager.ts"],(function(e){var t,r,n,a,i,o,c,s,l,d,p,u,w,h,v,g;return{setters:[function(e){t=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,a=e.assertThisInitialized},function(e){i=e.cclegacy,o=e._decorator,c=e.Node,s=e.director,l=e.Label,d=e.Sprite,p=e.Vec3,u=e.Button,w=e.EventHandler,h=e.Component},function(e){v=e.RewardManager},function(e){g=e.DateManager}],execute:function(){var f,m,y,R,I,S,b;i._RF.push({},"c0c2dmv0PJPPK69rZiJ3mWt","RewardSelectUI",void 0);var C=o.ccclass,L=o.property;e("RewardSelectUI",(f=C("RewardSelectUI"),m=L({type:[c],tooltip:"奖励选项节点"}),y=L({type:c,tooltip:"玩家节点"}),f((S=t((I=function(e){function t(){for(var t,r=arguments.length,i=new Array(r),o=0;o<r;o++)i[o]=arguments[o];return t=e.call.apply(e,[this].concat(i))||this,n(t,"rewardOptions",S,a(t)),n(t,"playerNode",b,a(t)),t.currentRewards=[],t.currentLevel=1,t}r(t,e);var i=t.prototype;return i.onLoad=function(){this.node.active=!1},i.showRewards=function(e){this.node.active=!0,s.pause(),this.currentLevel=e,this.currentRewards=v.Instance.getRewardsForLevel(e),this.updateRewardOptions()},i.updateRewardOptions=function(){for(var e=0;e<this.rewardOptions.length;e++){var t=this.rewardOptions[e],r=this.currentRewards[e];if(console.log("更新奖励选项 "+e+":",r),r){t.active=!0;var n=t.getChildByName("NameLabel").getComponent(l);n&&(n.string=r.name);var a=t.getChildByName("DescLabel").getComponent(l);a&&(a.string=r.description);var i=t.getChildByName("Icon").getComponent(d);i&&(i.spriteFrame=g.SpriteFrame[r.iconPath],t.getChildByName("Icon").scale=new p(2.5,2.5,1));var o=t.getComponent(u);if(o){var c=new w;c.target=this.node,c.component="RewardSelectUI",c.handler="onRewardSelected",c.customEventData=e.toString(),o.clickEvents=[c]}}else t.active=!1}},i.onRewardSelected=function(e,t){var r=parseInt(t),n=this.currentRewards[r];n&&(v.Instance.applyReward(n,this.playerNode),this.node.active=!1,s.resume())},t}(h)).prototype,"rewardOptions",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),b=t(I.prototype,"playerNode",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=I))||R));i._RF.pop()}}}));

System.register("chunks:///_virtual/RoleItemData.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(e){var i,t,n,r,a,o,l,u,c;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,l=e.AnimationClip,u=e.SpriteFrame,c=e.Component}],execute:function(){var p,m,s,f,b,y,_,d,g,h,w,z,D;a._RF.push({},"2fec1RaH5NLu7BdKrz6MTVm","RoleItemData",void 0);var R=o.ccclass,v=o.property;e("RoleItemData",(p=R("RoleItemData"),m=v(l),s=v(l),f=v(l),b=v(l),y=v(u),p((g=i((d=function(e){function i(){for(var i,t=arguments.length,a=new Array(t),o=0;o<t;o++)a[o]=arguments[o];return i=e.call.apply(e,[this].concat(a))||this,n(i,"animation_idle",g,r(i)),n(i,"animation_walk",h,r(i)),n(i,"animation_hurt",w,r(i)),n(i,"animation_die",z,r(i)),n(i,"spriteFrame",D,r(i)),i}return t(i,e),i}(c)).prototype,"animation_idle",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),h=i(d.prototype,"animation_walk",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=i(d.prototype,"animation_hurt",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),z=i(d.prototype,"animation_die",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=i(d.prototype,"spriteFrame",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=d))||_));a._RF.pop()}}}));

System.register("chunks:///_virtual/set.ts",["./rollupPluginModLoBabelHelpers.js","cc"],(function(t){var e,n,o,r,s,c;return{setters:[function(t){e=t.inheritsLoose},function(t){n=t.cclegacy,o=t._decorator,r=t.Widget,s=t.director,c=t.Component}],execute:function(){var i;n._RF.push({},"261d1s16D1FDLBZkGesEcao","set",void 0);var u=o.ccclass;o.property,t("set",u("set")(i=function(t){function n(){return t.apply(this,arguments)||this}e(n,t);var o=n.prototype;return o.onEnable=function(){var t=this.node.getComponent(r);t&&t.updateAlignment()},o.button1=function(){this.node.active=!0,s.pause()},o.button2=function(){this.node.active=!1,s.resume()},o.button3=function(){s.loadScene("start"),s.resume()},n}(c))||i);n._RF.pop()}}}));

System.register("chunks:///_virtual/start.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts"],(function(t){var e,r,n,a,o,i,c,s,u,l,p;return{setters:[function(t){e=t.applyDecoratedDescriptor,r=t.inheritsLoose,n=t.initializerDefineProperty,a=t.assertThisInitialized},function(t){o=t.cclegacy,i=t._decorator,c=t.Node,s=t.AudioSource,u=t.director,l=t.Component},function(t){p=t.DateManager}],execute:function(){var f,d,y,v,b;o._RF.push({},"f6ed66ME9xA35yNIXNrUXsV","start",void 0);var g=i.ccclass,h=i.property;t("start",(f=g("start"),d=h(c),f((b=e((v=function(t){function e(){for(var e,r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o))||this,n(e,"btn_start",b,a(e)),e}r(e,t);var o=e.prototype;return o.start=function(){},o.update=function(t){},o.button1=function(){var t;null==(t=this.btn_start.getComponent(s))||t.play(),u.loadScene("playerscele"),p.waveIndex=1},e}(l)).prototype,"btn_start",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),y=v))||y));o._RF.pop()}}}));

System.register("chunks:///_virtual/VolumeControl.ts",["./rollupPluginModLoBabelHelpers.js","cc","./AudioManager.ts"],(function(e){var o,r,n,t,i,s,l,u,a,c;return{setters:[function(e){o=e.applyDecoratedDescriptor,r=e.inheritsLoose,n=e.initializerDefineProperty,t=e.assertThisInitialized},function(e){i=e.cclegacy,s=e._decorator,l=e.Slider,u=e.ProgressBar,a=e.Component},function(e){c=e.AudioManager}],execute:function(){var p,d,g,h,f;i._RF.push({},"323b5qhJuFNTolfXov5pn3+","VolumeControl",void 0);var m=s.ccclass,v=s.property;e("VolumeControl",(p=m("VolumeControl"),d=v(l),p((f=o((h=function(e){function o(){for(var o,r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return o=e.call.apply(e,[this].concat(i))||this,n(o,"volumeSlider",f,t(o)),o.slider=null,o.ProgressBar=null,o}r(o,e);var i=o.prototype;return i.onLoad=function(){this.slider=this.volumeSlider.getComponent(l),this.ProgressBar=this.volumeSlider.getComponent(u),this.slider.progress=1,this.ProgressBar.progress=1},i.onVolumeChange=function(){var e=this.slider.progress;this.ProgressBar.progress=e,c.Instance?c.Instance.setBGMVolume(e):console.warn("音频管理器未初始化")},i.onbuttonclick=function(){this.node.active=!1},i.onbuttonclick2=function(){this.node.active=!0},o}(a)).prototype,"volumeSlider",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),g=h))||g));i._RF.pop()}}}));

System.register("chunks:///_virtual/Weapon.ts",["./rollupPluginModLoBabelHelpers.js","cc","./DateManager.ts"],(function(t){var n,a,i,e,o,s;return{setters:[function(t){n=t.inheritsLoose},function(t){a=t.cclegacy,i=t._decorator,e=t.tween,o=t.Component},function(t){s=t.DateManager}],execute:function(){var c;a._RF.push({},"4f5b8w/2FZD37YXCeMfrCGv","Weapon",void 0);var r=i.ccclass;i.property,t("Weapon",r("Weapon")(c=function(t){function a(){for(var n,a=arguments.length,i=new Array(a),e=0;e<a;e++)i[e]=arguments[e];return(n=t.call.apply(t,[this].concat(i))||this).isattacking=!1,n}n(a,t);var i=a.prototype;return i.setPositionAndRotation=function(t,n){s.ndPlayer&&(this.node.setPosition(s.ndPlayer.position.x+t.x,s.ndPlayer.position.y+t.y),this.node.angle=n)},i.leftattack=function(t){var n=this,a=this.node.angle,i=this.node.position.clone();this.isattacking||(this.isattacking=!0,e(this.node).to(.3,{angle:-90,x:i.x+20,y:i.y+10},{easing:"quadOut"}).to(.4,{angle:180,x:i.x-35,y:i.y+5},{easing:"quadIn"}).to(.3,{angle:a},{easing:"sineOut"}).call((function(){t(),n.isattacking=!1})).start())},i.rightattack=function(t){var n=this,a=this.node.angle,i=this.node.position.clone();this.isattacking||(this.isattacking=!0,e(this.node).to(.3,{angle:90,x:i.x-20,y:i.y+10},{easing:"quadOut"}).to(.4,{angle:-180,x:i.x+35,y:i.y+5},{easing:"quadIn"}).to(.3,{angle:a},{easing:"sineOut"}).call((function(){t(),n.isattacking=!1})).start())},a}(o))||c);a._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});